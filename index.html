<!doctype html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>How do I get a job in UX?</title>
  <script>
   window.onload = ()=>{
    const now = new Stage('Presently...', 'Your current job is no good, and you want to get a new job in UX!', 'What do you do next?');
    const portfolio = new Stage('Work on portfolio', 'You focus on your UX portfolio. You write up your student projects and some new pieces too.', 'What do you do next?');
    const startup = new Stage('Focus on startup', 'You meet some cool people and come up with an idea for a startup. You work on that for a while', 'How does that go?');
    const sideHustle = new Stage('A fun side hustle','Your startup never makes it big, but you do produce a lot of good work. That will look good in your portfolio...', '');
    const funded = new Stage('We got funded!', 'You quit your job to work at your new startup!', 'What do you do next?');
    const gameOver = new Stage('Congratulations!', 'You got yourself a new job in UX. Enjoy yourself!', 'You got a new job in:<br>24 weeks<br>24% of players chose your path.<br>45% of players got a job sooner than you.<br>Most players got a new job in 5 weeks');
    const applyJob = new Stage();
    const applyInternship = new Stage();
    const applyMasters = new Stage();
    now.addChoice('Work on UX portfolio', portfolio)
        .addChoice('Work on a startup', startup)
        .addChoice('Apply to UX Internship', applyInternship)
        .addChoice('Apply to Master\'s Degree', applyMasters);
    startup.addChoice('We don\'t get investment but it\'s a fun side hustle.', sideHustle)
        .addChoice('We got funded!', funded);
    funded.addChoice('I got a new job!', gameOver);
    gameOver.addChoice('Share my results...', gameOver);
    sideHustle.addChoice('Add startup work to my portfolio', portfolio);
    portfolio.addChoice('Apply to UX job', applyJob)
        .addChoice('Apply to UX Internship', applyInternship)
        .addChoice('Apply to Masters Program', applyMasters);
    
    const presenter = new Presenter(document.getElementById('container'));
    presenter.start(now);
   };
    class Stage {
        constructor(title, description, prompt) {
            this.title = title || 'Default Title';
            this.description = description || 'Placeholder description';
            this.prompt = prompt || 'Placeholder prompt';
            this.choices = [];
        }
        addChoice(title, target) {
            this.choices.push({title, target});
            return this; // for fluid interface
        }
    }
    class Presenter {
        constructor(parent) {
            this.parent = parent;
        }
        start(target) {
            const title = document.createElement('h2');
            const description = document.createElement('p');
            const prompt = document.createElement('p');
            const choices = target.choices.map(choice => document.createElement('button'));

            title.innerHTML = target.title;
            description.innerHTML = target.description;
            prompt.innerHTML = target.prompt;
            choices.forEach((choice, index) => {
                choice.innerHTML = target.choices[index].title;
                choice.addEventListener('click', (e) => {
                    this.start(target.choices[index].target);
                });
            });
        
            // Removing all children from parent
            while (this.parent.firstChild) {
                this.parent.removeChild(this.parent.firstChild);
            }
            this.parent.appendChild(title);
            this.parent.appendChild(description);
            this.parent.appendChild(prompt);
            choices.forEach(choice => { this.parent.appendChild(choice); });
        }
    } 
  </script>
 </head>
 <body>
  <div id="container"></div>
 </body>
</html>
